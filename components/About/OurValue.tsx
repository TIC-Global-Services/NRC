import React, { useRef, useEffect, useState } from "react";
import { motion, useScroll } from "framer-motion";
import Container from "../Reusable/Container";
import AnimatedButton from "../ui/animatedButton";

const valueCards = [
  {
    title: "Expertise",
    desc: "Rigorous analysis and domain knowledge."
  },
  {
    title: "Trust & Integrity",
    desc: "Open communication and aligned interests."
  },
  {
    title: "Transparency",
    desc: "Clear reporting and honest risk disclosure."
  },
  {
    title: "Client-centricity",
    desc: "Solutions built around client objectives and time horizons."
  },
  {
    title: "Long-term Orientation",
    desc: "Patient capital and disciplined decision-making."
  }
];

const OurValue = () => {
  const containerRef = useRef(null);
  const [currentStep, setCurrentStep] = useState(0);

  const { scrollYProgress } = useScroll({
    target: containerRef,
    offset: ["start start", "end end"],
  });

  useEffect(() => {
    const unsubscribe = scrollYProgress.onChange((progress) => {
      const step = Math.min(
        Math.floor(progress * (valueCards.length + 1)),
        valueCards.length
      );
      setCurrentStep(step);
    });
    return unsubscribe;
  }, [scrollYProgress]);

  return (
    <div ref={containerRef} className="h-[600vh] lg:pt-14 pt-24 lg:pb-14 bg-white">
      <div className="sticky top-0 lg:h-[120vh] h-screen overflow-hidden">
        <Container
          disablePaddingBottomMobile
          disablePaddingTopMobile
          className="h-full md:-pt-36 md:-pb-56 lg:-pb-36 "
        >
          <div className="h-full flex items-center justify-center ">
            <div className="w-full grid grid-cols-1 lg:grid-cols-[4fr_6fr] gap-12 items-start">
              {/* Left Content Section */}
              <div className="flex flex-col justify-start space-y-8 ">
                <motion.div
                  initial={{ opacity: 0, y: 50 }}
                  animate={{ opacity: 1, y: 0 }}
                  transition={{ duration: 0.8 }}
                  className="space-y-6"
                >
                  <h1 className="text-4xl md:text-5xl font-light text-black leading-tight">
                    Our <span className="text-primary">Values</span>
                  </h1>
                </motion.div>

                {/* Value Cards Stack */}
                <div className="space-y-4 md:w-full lg:max-w-lg">
                  {valueCards.map((card, index) => (
                    <motion.div
                      key={index}
                      initial={{ opacity: 0, y: 100 }}
                      animate={{
                        opacity: index < currentStep ? 1 : 0,
                        y: index < currentStep ? 0 : 100,
                      }}
                      transition={{
                        duration: 0.6,
                        ease: "easeOut",
                      }}
                      className="bg-[#F8F8F8] rounded-lg p-4 md:p-8 lg:p-4 w-full"
                    >
                      <h3 className="2xl:text-[26px] md:text-[26px] text-[20px] leading-7 font-normal text-black mb-2">
                        {card.title}
                      </h3>
                      <p className="2xl:text-[20px] md:text-lg text-sm leading-8 text-secondary">
                        {card.desc}
                      </p>
                    </motion.div>
                  ))}
                </div>
              </div>

              {/* Right SVG Animation Area */}
              <div className="relative w-full  h-full justify-items-end lg:flex hidden items-start mt-[20%] justify-center ">
                <svg
                  width="580"
                  height="381"
                  viewBox="0 0 580 381"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <rect
                    x="187.469"
                    y="62.3184"
                    width="242.664"
                    height="234.725"
                    rx="3.5"
                    fill="#F2F3FD"
                    stroke="#D8D9DE"
                  />
                  <g clip-path="url(#clip0_262_1324)">
                    <path
                      d="M362.354 246.75H322.316V166.09L241.549 166.196L241.496 126.157L362.354 125.998V246.75Z"
                      fill="#6A48E8"
                    />
                  </g>

                  {/* Top right */}
                  <motion.g
                    initial={{ opacity: 0 }}
                    animate={{ opacity: currentStep >= 1 ? 1 : 0 }}
                    transition={{ duration: 0.6 }}
                  >
                    <line
                      x1="416.629"
                      y1="63.0508"
                      x2="416.629"
                      y2="21.1348"
                      stroke="#D9D9D9"
                    />
                    <line
                      x1="416.195"
                      y1="20.6348"
                      x2="469.4"
                      y2="20.6348"
                      stroke="#D9D9D9"
                    />
                    <rect
                      x="469.258"
                      y="0.722656"
                      width="40.8237"
                      height="40.8237"
                      rx="4"
                      fill="#E9EAFB"
                    />
                    <path
                      d="M488.68 21.1354V30.8894C486.492 30.1814 484.531 28.9056 482.996 27.192C481.462 25.4784 480.41 23.3884 479.947 21.1354H488.681H488.68ZM497.964 24.9294C496.364 27.7525 493.767 29.8752 490.681 30.8804L490.68 21.1354H499.388C499.116 22.4669 498.635 23.7472 497.964 24.9294ZM488.681 11.6614L488.68 19.1354H479.694C479.626 17.7034 479.795 16.2554 480.208 14.8534C480.271 14.6386 480.405 14.4513 480.587 14.3213C480.769 14.1913 480.99 14.1262 481.213 14.1364C483.802 14.2548 486.348 13.4559 488.405 11.8804L488.681 11.6614ZM490.68 19.1354V11.6824L490.59 11.6094C492.608 13.2849 495.157 14.1847 497.779 14.1464L498.121 14.1364C498.345 14.1262 498.565 14.1913 498.748 14.3213C498.93 14.4513 499.063 14.6386 499.126 14.8534C499.539 16.2564 499.708 17.7034 499.64 19.1354H490.68Z"
                      fill="#6A48E8"
                    />
                  </motion.g>

                  {/* Right bottom */}
                  <motion.g
                    initial={{ opacity: 0 }}
                    animate={{ opacity: currentStep >= 5 ? 1 : 0 }}
                    transition={{ duration: 0.6 }}
                  >
                    <line
                      x1="430.633"
                      y1="259.213"
                      x2="559.332"
                      y2="259.213"
                      stroke="url(#paint0_linear_262_1324)"
                    />
                    <line
                      x1="558.828"
                      y1="259.713"
                      x2="558.828"
                      y2="217.797"
                      stroke="#D9D9D9"
                    />
                    <rect
                      x="538.918"
                      y="177.066"
                      width="40.8237"
                      height="40.8237"
                      rx="4"
                      fill="#E9EAFB"
                    />
                    <g clip-path="url(#clip1_262_1324)">
                      <path
                        fillRule="evenodd"
                        clipRule="evenodd"
                        d="M558.552 202.594L553.734 197.777C554.264 196.89 554.791 195.973 555.315 195.062C557.057 192.034 558.758 189.079 560.351 187.541C564.678 183.215 570.605 185.723 570.605 185.723C570.605 185.723 573.114 191.65 568.787 195.977C567.262 197.557 564.353 199.232 561.349 200.962C560.412 201.501 559.467 202.046 558.552 202.594ZM562.221 191.396C562.221 189.898 563.435 188.684 564.933 188.684C566.43 188.684 567.644 189.898 567.644 191.396C567.644 192.893 566.43 194.107 564.933 194.107C563.435 194.107 562.221 192.893 562.221 191.396ZM555.208 190.998C552.777 190.351 550.497 191.549 548.473 193.405C548.066 193.779 548.151 194.432 548.624 194.717L551.89 196.684L551.894 196.678C552.365 195.889 552.892 194.975 553.425 194.049C554.035 192.992 554.653 191.918 555.208 190.998ZM559.644 204.438L561.611 207.704C561.897 208.177 562.55 208.262 562.923 207.855C564.78 205.831 565.978 203.549 565.329 201.117C564.436 201.656 563.496 202.198 562.565 202.735L562.423 202.816C561.483 203.358 560.552 203.894 559.653 204.432L559.644 204.438ZM551.823 201.016C552.284 201.008 552.741 201.093 553.168 201.265C553.595 201.438 553.982 201.695 554.308 202.02C554.634 202.346 554.89 202.733 555.063 203.16C555.235 203.587 555.32 204.045 555.312 204.505C555.304 204.965 555.203 205.419 555.015 205.84C554.829 206.258 554.561 206.635 554.226 206.948C553.846 207.312 553.251 207.597 552.7 207.816C552.112 208.05 551.441 208.259 550.814 208.429C550.185 208.601 549.585 208.739 549.132 208.829C548.907 208.874 548.708 208.908 548.556 208.929C548.483 208.939 548.402 208.948 548.327 208.952C548.294 208.953 548.233 208.955 548.163 208.948C548.129 208.945 548.065 208.937 547.988 208.914C547.937 208.899 547.739 208.839 547.575 208.647C547.434 208.483 547.395 208.311 547.386 208.27C547.371 208.204 547.367 208.147 547.365 208.118C547.361 208.056 547.364 208.001 547.366 207.969C547.371 207.898 547.381 207.821 547.391 207.748C547.413 207.597 547.449 207.4 547.494 207.176C547.586 206.724 547.725 206.126 547.897 205.5C548.069 204.877 548.279 204.209 548.512 203.623C548.732 203.074 549.017 202.481 549.38 202.102C549.693 201.767 550.07 201.499 550.488 201.313C550.909 201.125 551.363 201.025 551.823 201.016Z"
                        fill="#6A48E8"
                      />
                    </g>
                    {/* Bottom right Line */}
                    <defs>
                      <linearGradient
                        id="paint0_linear_262_1324"
                        x1="430.633"
                        y1="260.213"
                        x2="559.332"
                        y2="260.213"
                        gradientUnits="userSpaceOnUse"
                      >
                        <stop stop-color="white" />
                        <stop offset="1" stop-color="#6A48E8" />
                      </linearGradient>
                      <clipPath id="clip0_262_1324">
                        <rect
                          width="121.972"
                          height="121.972"
                          fill="white"
                          transform="translate(241.496 125.998)"
                        />
                      </clipPath>
                      <clipPath id="clip1_262_1324">
                        <rect
                          width="24"
                          height="24"
                          fill="white"
                          transform="translate(547.328 185)"
                        />
                      </clipPath>
                      <clipPath id="clip2_262_1324">
                        <rect
                          width="24"
                          height="24"
                          fill="white"
                          transform="translate(300.484 347.871)"
                        />
                      </clipPath>
                      <clipPath id="clip3_262_1324">
                        <rect
                          width="24"
                          height="24"
                          fill="white"
                          transform="translate(8.48047 55.5176)"
                        />
                      </clipPath>
                    </defs>
                  </motion.g>

                  {/* Bottom */}
                  <motion.g
                    initial={{ opacity: 0 }}
                    animate={{ opacity: currentStep >= 4 ? 1 : 0 }}
                    transition={{ duration: 0.6 }}
                  >
                    <line
                      x1="311.984"
                      y1="339.459"
                      x2="311.984"
                      y2="297.543"
                      stroke="#D9D9D9"
                    />
                    <rect
                      x="292.07"
                      y="339.459"
                      width="40.8237"
                      height="40.8237"
                      rx="4"
                      fill="#E9EAFB"
                    />
                    <g clip-path="url(#clip2_262_1324)">
                      <path
                        fillRule="evenodd"
                        clipRule="evenodd"
                        d="M310.231 352.121C310.231 352.983 309.889 353.81 309.279 354.419C308.67 355.029 307.843 355.371 306.981 355.371C306.119 355.371 305.293 355.029 304.683 354.419C304.074 353.81 303.731 352.983 303.731 352.121C303.731 351.259 304.074 350.432 304.683 349.823C305.293 349.214 306.119 348.871 306.981 348.871C307.843 348.871 308.67 349.214 309.279 349.823C309.889 350.432 310.231 351.259 310.231 352.121ZM306.981 356.121C305.795 356.121 304.879 356.163 304.203 356.213C303.166 356.29 302.352 357.035 302.132 358.041C301.762 359.743 301.496 361.466 301.336 363.201C301.315 363.419 301.337 363.64 301.403 363.849C301.468 364.058 301.575 364.252 301.717 364.419C301.86 364.587 302.034 364.723 302.23 364.822C302.426 364.92 302.639 364.978 302.858 364.993C303.139 365.012 303.459 365.031 303.818 365.048L304.152 369.558C304.207 370.308 304.745 370.958 305.524 371.043C306.493 371.148 307.47 371.148 308.439 371.043C309.218 370.958 309.756 370.308 309.811 369.558L309.852 369.008C309.77 368.131 309.73 367.251 309.732 366.371C309.732 365.3 309.788 364.405 309.852 363.733C309.989 362.292 310.917 361.032 312.297 360.532C312.167 359.697 312.012 358.866 311.831 358.04C311.611 357.035 310.798 356.29 309.76 356.213C308.836 356.148 307.909 356.117 306.982 356.121H306.981ZM314.783 360.55C314.623 360.932 314.485 361.323 314.369 361.721C313.958 361.751 313.611 361.786 313.319 361.821C312.224 361.953 311.446 362.816 311.345 363.875C311.268 364.705 311.23 365.538 311.232 366.371C311.232 367.39 311.285 368.238 311.345 368.867C311.446 369.926 312.224 370.789 313.319 370.922C314.168 371.024 315.496 371.121 317.482 371.121C319.468 371.121 320.796 371.024 321.644 370.921C322.739 370.789 323.518 369.926 323.618 368.867C323.678 368.238 323.732 367.39 323.732 366.371C323.732 365.352 323.678 364.505 323.618 363.875C323.518 362.817 322.74 361.953 321.644 361.821C321.295 361.779 320.945 361.746 320.594 361.721C320.478 361.323 320.34 360.932 320.181 360.55C319.891 359.844 319.259 359.275 318.425 359.176C318.112 359.139 317.797 359.121 317.482 359.121C317.122 359.121 316.805 359.144 316.539 359.176C315.705 359.275 315.074 359.844 314.783 360.55ZM317.482 360.621C317.185 360.621 316.927 360.64 316.715 360.665C316.495 360.691 316.283 360.845 316.17 361.121C316.103 361.284 316.034 361.461 315.97 361.642C316.425 361.629 316.928 361.621 317.482 361.621C318.036 361.621 318.539 361.629 318.994 361.642C318.932 361.466 318.865 361.293 318.794 361.121C318.681 360.846 318.468 360.691 318.248 360.665C317.994 360.635 317.738 360.621 317.482 360.621Z"
                        fill="#6A48E8"
                      />
                    </g>
                  </motion.g>

                  {/* Top Left */}
                  <motion.g
                    initial={{ opacity: 0 }}
                    animate={{ opacity: currentStep >= 2 ? 1 : 0 }}
                    transition={{ duration: 0.6 }}
                  >
                    <line
                      y1="-0.5"
                      x2="95.8516"
                      y2="-0.5"
                      transform="matrix(1 0 0 -1 40.8906 66.9707)"
                      stroke="#D9D9D9"
                    />
                    <line
                      x1="136.742"
                      y1="107.391"
                      x2="185.87"
                      y2="107.391"
                      stroke="#D9D9D9"
                    />
                    <line
                      y1="-0.5"
                      x2="41.916"
                      y2="-0.5"
                      transform="matrix(-4.37114e-08 1 1 4.37114e-08 136.742 66.9707)"
                      stroke="#D9D9D9"
                    />
                    <rect
                      x="0.0664062"
                      y="47.1055"
                      width="40.8237"
                      height="40.8237"
                      rx="4"
                      fill="#E9EAFB"
                    />
                    <g clip-path="url(#clip3_262_1324)">
                      <path
                        d="M25.7305 72.7676V75.0176H14.8555C13.9604 75.0176 13.1019 74.662 12.469 74.0291C11.836 73.3961 11.4805 72.5377 11.4805 71.6426C11.4805 70.7475 11.836 69.889 12.469 69.2561C13.1019 68.6232 13.9604 68.2676 14.8555 68.2676H15.2305V66.7676H14.8555C13.5625 66.7676 12.3226 67.2812 11.4083 68.1954C10.4941 69.1097 9.98047 70.3496 9.98047 71.6426C9.98047 72.9355 10.4941 74.1755 11.4083 75.0897C12.3226 76.004 13.5625 76.5176 14.8555 76.5176H25.7305V78.7676H31.7305V72.7676H25.7305ZM30.2305 77.2676H27.2305V74.2676H30.2305V77.2676Z"
                        fill="#6A48E8"
                      />
                      <path
                        d="M24.2305 72.0176H22.7305V69.7676H18.2305V72.0176H16.7305V69.7676C16.7309 69.3699 16.8891 68.9886 17.1703 68.7074C17.4515 68.4262 17.8328 68.268 18.2305 68.2676H22.7305C23.1282 68.268 23.5094 68.4262 23.7906 68.7074C24.0718 68.9886 24.23 69.3699 24.2305 69.7676V72.0176Z"
                        fill="#6A48E8"
                      />
                      <path
                        d="M20.4805 67.5176C20.0355 67.5176 19.6004 67.3856 19.2304 67.1384C18.8604 66.8912 18.572 66.5398 18.4017 66.1286C18.2314 65.7175 18.1869 65.2651 18.2737 64.8286C18.3605 64.3922 18.5748 63.9913 18.8895 63.6766C19.2041 63.3619 19.6051 63.1476 20.0415 63.0608C20.478 62.974 20.9304 63.0186 21.3415 63.1889C21.7526 63.3591 22.104 63.6475 22.3513 64.0175C22.5985 64.3876 22.7305 64.8226 22.7305 65.2676C22.7298 65.8641 22.4926 66.436 22.0707 66.8578C21.6489 67.2797 21.077 67.5169 20.4805 67.5176ZM20.4805 64.5176C20.3321 64.5176 20.1871 64.5616 20.0638 64.644C19.9405 64.7264 19.8443 64.8435 19.7876 64.9806C19.7308 65.1176 19.7159 65.2684 19.7449 65.4139C19.7738 65.5594 19.8453 65.693 19.9501 65.7979C20.055 65.9028 20.1887 65.9742 20.3342 66.0032C20.4796 66.0321 20.6304 66.0173 20.7675 65.9605C20.9045 65.9037 21.0217 65.8076 21.1041 65.6843C21.1865 65.5609 21.2305 65.4159 21.2305 65.2676C21.2302 65.0687 21.1511 64.8781 21.0105 64.7375C20.8699 64.5969 20.6793 64.5178 20.4805 64.5176Z"
                        fill="#6A48E8"
                      />
                      <path
                        d="M26.1055 58.5176H15.2305V56.2676H9.23047V62.2676H15.2305V60.0176H26.1055C27.0006 60.0176 27.859 60.3732 28.492 61.0061C29.1249 61.639 29.4805 62.4975 29.4805 63.3926C29.4805 64.2877 29.1249 65.1461 28.492 65.7791C27.859 66.412 27.0006 66.7676 26.1055 66.7676H25.7305V68.2676H26.1055C27.3984 68.2676 28.6384 67.754 29.5526 66.8397C30.4669 65.9255 30.9805 64.6855 30.9805 63.3926C30.9805 62.0996 30.4669 60.8597 29.5526 59.9454C28.6384 59.0312 27.3984 58.5176 26.1055 58.5176ZM13.7305 60.7676H10.7305V57.7676H13.7305V60.7676Z"
                        fill="#6A48E8"
                      />
                    </g>
                  </motion.g>

                  {/* Bottom left */}
                  <motion.g
                    initial={{ opacity: 0 }}
                    animate={{ opacity: currentStep >= 3 ? 1 : 0 }}
                    transition={{ duration: 0.6 }}
                  >
                    <line
                      x1="63.7539"
                      y1="252.145"
                      x2="186.967"
                      y2="252.145"
                      stroke="#D9D9D9"
                    />
                    <line
                      x1="64.2539"
                      y1="251.887"
                      x2="64.2539"
                      y2="293.045"
                      stroke="#D9D9D9"
                    />
                    <rect
                      x="43.3438"
                      y="287.211"
                      width="40.8237"
                      height="40.8237"
                      rx="4"
                      fill="#E9EAFB"
                    />
                    <path
                      d="M65.9789 317.399L58.6289 315.299V306.874H60.7039C60.7873 306.874 60.8748 306.882 60.9664 306.899C61.0581 306.915 61.1456 306.94 61.2289 306.974L67.3539 309.274C67.8539 309.457 68.2373 309.736 68.5039 310.111C68.7706 310.486 68.9039 310.865 68.9039 311.249C68.9039 311.382 68.8623 311.49 68.7789 311.574C68.6956 311.657 68.5873 311.699 68.4539 311.699H66.6289C66.1956 311.699 65.8123 311.674 65.4789 311.624C65.1456 311.574 64.7789 311.482 64.3789 311.349L62.9039 310.874C62.8039 310.84 62.7081 310.845 62.6164 310.886C62.5248 310.928 62.4623 310.999 62.4289 311.099C62.3956 311.199 62.3998 311.295 62.4414 311.386C62.4831 311.478 62.5539 311.54 62.6539 311.574L64.1789 312.099C64.4456 312.182 64.7831 312.261 65.1914 312.336C65.5998 312.411 66.1789 312.449 66.9289 312.449H71.3039C72.2539 312.449 72.9831 312.67 73.4914 313.111C73.9998 313.553 74.2539 314.224 74.2539 315.124L66.8289 317.399C66.6956 317.432 66.5539 317.449 66.4039 317.449C66.2539 317.449 66.1123 317.432 65.9789 317.399ZM53.2539 315.224V308.374C53.2539 307.957 53.3997 307.603 53.6914 307.311C53.9831 307.02 54.3372 306.874 54.7539 306.874H55.6039C56.0206 306.874 56.3747 307.02 56.6664 307.311C56.9581 307.603 57.1039 307.957 57.1039 308.374V315.224C57.1039 315.64 56.9581 315.995 56.6664 316.286C56.3747 316.578 56.0206 316.724 55.6039 316.724H54.7539C54.3372 316.724 53.9831 316.578 53.6914 316.286C53.3997 315.995 53.2539 315.64 53.2539 315.224ZM65.5039 303.324L70.8539 297.999C70.9873 297.865 71.1539 297.799 71.3539 297.799C71.5539 297.799 71.7289 297.865 71.8789 297.999C72.0289 298.132 72.1039 298.303 72.1039 298.511C72.1039 298.72 72.0289 298.899 71.8789 299.049L66.0289 304.924C65.8789 305.074 65.7039 305.149 65.5039 305.149C65.3039 305.149 65.1289 305.074 64.9789 304.924L61.9289 301.874C61.7789 301.724 61.7039 301.549 61.7039 301.349C61.7039 301.149 61.7789 300.974 61.9289 300.824C62.0789 300.674 62.2581 300.599 62.4664 300.599C62.6748 300.599 62.8539 300.674 63.0039 300.824L65.5039 303.324Z"
                      fill="#6A48E8"
                    />
                  </motion.g>
                </svg>
              </div>
            </div>
          </div>
        </Container>
      </div>
    </div>
  );
};

export default OurValue;